<% @posts.each do |p| %>
  <% author = User.find(p.user_id) %>
  <% if p.user_id == current_user.id || friends(author) %>
    <span><%= link_to image_tag("http://www.gravatar.com/avatar.php?gravatar_id=#{Digest::MD5::hexdigest(author.email)}", :alt => 'Avatar', :class => 'avatar'), user_path(id: author.id) %></span>
    <p>Author: <%= link_to "#{author.name}", user_path(id: author.id) %></p>
    <p>Post: </p>
    <%= p.body %>
    <br>
    <br>
    <% already_liked = p.likes.find_by(user_id: current_user.id) %>
    <%= p.likes.count %><br>
    <% if already_liked %>
    	<%= link_to post_like_path(p, already_liked), method: :delete do %>
            <i class="fas fa-thumbs-up"></i>
        <% end %>
    <% else %>
    	<%= link_to post_likes_path(p), method: :post do %>
            <i class="far fa-thumbs-up"></i>
        <% end %>
    <% end %>
    <br>
    <br>
    <%= %>
    <%= link_to post_path(p.id) do %>
        <i class="far fa-comments"></i>
    <% end %>
    <% if p.user_id == current_user.id %>
    	<%= link_to 'update', edit_post_path(p) %>
    	<%= link_to 'delete', p, method: :delete, data: { confirm: "Are you sure?" } %>
    <% end %>
    <hr>
  <% end %>
<% end %>
